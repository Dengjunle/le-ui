(function(t,e){"object"===typeof exports&&"object"===typeof module?module.exports=e():"function"===typeof define&&define.amd?define([],e):"object"===typeof exports?exports["le-many-slider"]=e():t["le-many-slider"]=e()})("undefined"!==typeof self?self:this,(function(){return function(t){var e={};function r(n){if(e[n])return e[n].exports;var i=e[n]={i:n,l:!1,exports:{}};return t[n].call(i.exports,i,i.exports,r),i.l=!0,i.exports}return r.m=t,r.c=e,r.d=function(t,e,n){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},r.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)r.d(n,i,function(e){return t[e]}.bind(null,i));return n},r.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="",r(r.s="fb15")}({"10d5":function(t,e,r){},"370e":function(t,e,r){"use strict";r("10d5")},8875:function(t,e,r){var n,i,o;(function(r,l){i=[],n=l,o="function"===typeof n?n.apply(e,i):n,void 0===o||(t.exports=o)})("undefined"!==typeof self&&self,(function(){function t(){var e=Object.getOwnPropertyDescriptor(document,"currentScript");if(!e&&"currentScript"in document&&document.currentScript)return document.currentScript;if(e&&e.get!==t&&document.currentScript)return document.currentScript;try{throw new Error}catch(h){var r,n,i,o=/.*at [^(]*\((.*):(.+):(.+)\)$/gi,l=/@([^@]*):(\d+):(\d+)\s*$/gi,s=o.exec(h.stack)||l.exec(h.stack),a=s&&s[1]||!1,u=s&&s[2]||!1,f=document.location.href.replace(document.location.hash,""),d=document.getElementsByTagName("script");a===f&&(r=document.documentElement.outerHTML,n=new RegExp("(?:[^\\n]+?\\n){0,"+(u-2)+"}[^<]*<script>([\\d\\D]*?)<\\/script>[\\d\\D]*","i"),i=r.replace(n,"$1").trim());for(var c=0;c<d.length;c++){if("interactive"===d[c].readyState)return d[c];if(d[c].src===a)return d[c];if(a===f&&d[c].innerHTML&&d[c].innerHTML.trim()===i)return d[c]}return null}}return t}))},fb15:function(t,e,r){"use strict";if(r.r(e),"undefined"!==typeof window){var n=window.document.currentScript,i=r("8875");n=i(),"currentScript"in document||Object.defineProperty(document,"currentScript",{get:i});var o=n&&n.src.match(/(.+\/)[^/]+\.js(\?.*)?$/);o&&(r.p=o[1])}var l=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{ref:"leslider",staticClass:"le-slider__runway"},[t.showStops?t._l(t.stopArr,(function(t){return r("div",{key:t.id,staticClass:"le-slider_stops",style:{left:t.left+"%"}})})):t._e(),t._l(t.list,(function(e,n){return[r("div",{key:e.id},[r("div",{ref:"le-slider__bar"+n,refInFor:!0,staticClass:"le-slider__bar",style:t.barStyle[n]}),r("div",{staticClass:"le-slider__button-wrapper",style:t.wrapperStyle[n],on:{touchstart:function(e){return t.onButtonDown(e,n)},mousedown:function(e){return t.onButtonDown(e,n)}}},[r("div",{staticClass:"le-slider__button",style:{borderColor:t.wrapperStyle[n].borderColor}})])])]}))],2)},s=[],a={name:"LeManySlider",model:{prop:"list",event:"input"},props:{list:{type:Array,default:()=>[]},colorList:{type:Array,default:()=>["red","green"]},stopNum:{type:Number,default:0},showStops:{type:Boolean,default:!1}},data(){return{current:0,marginLeft:0,stopArr:[]}},watch:{stopNum:{handler(t,e){let r=t?100/t:0,n=e?100/e:0,i=Array.from({length:t-1}).map((t,e)=>({id:Date.now()+parseInt(1e4*Math.random()),left:Math.round((e+1)*r)}));if(this.stopArr=i,e){let t=[],e=JSON.parse(JSON.stringify(this.list));e.forEach((o,l)=>{if(0===o.diffPrivate)t.push(o);else{if(t[t.length-1].diffPrivate>99||l+1>=e.length)return;let s=Math.round(o.value/n);s=0===s?1:s;let a=Math.round((r*s+t[t.length-1].diffPrivate)/r)-1;o.diffPrivate=a>=i.length?100:i[a].left,o.value=Math.round(o.diffPrivate-t[t.length-1].diffPrivate),r*s+t[t.length-1].diffPrivate>100&&(o.value=Math.round(100-t[t.length-1].diffPrivate),o.diffPrivate=100),t.push(o)}}),t[t.length-1].diffPrivate<99&&t.push({id:(new Date).getTime()+parseInt(1e3*Math.random()),value:100-t[t.length-1].diffPrivate,diffPrivate:100,color:this.setRightColor(t)}),this.$emit("input",t)}},immediate:!0}},computed:{wrapperStyle(){let t=this.list;return t.map(t=>({left:t.diffPrivate+"%",borderColor:t.color}))},barStyle(){let t=this.list;return t.map(t=>({width:t.value+"%",left:t.diffPrivate-t.value+"%",backgroundColor:t.color}))}},mounted(){this.marginLeft=this.$refs.leslider.getBoundingClientRect().left,this.init()},methods:{init(){let t=this.list,e={id:(new Date).getTime()+parseInt(1e3*Math.random()),value:0,diffPrivate:0,color:this.colorList[0]},r={id:(new Date).getTime()+parseInt(1e3*Math.random()),value:100,diffPrivate:100,color:this.colorList[1]};0===t.length&&(t.push(e,r),this.$emit("input",t)),t[0].value>0&&(t.unshift({id:(new Date).getTime()+parseInt(1e3*Math.random()),value:0,diffPrivate:0,color:this.setLeftColor()}),this.$emit("input",t)),t[t.length-1].diffPrivate<100&&(t.push({id:(new Date).getTime()+parseInt(1e3*Math.random()),value:100-t[t.length-1].diffPrivate,diffPrivate:100,color:this.setRightColor()}),this.$emit("input",t))},onButtonDown(t,e){t.preventDefault(),this.current=e,window.addEventListener("mousemove",this.onDragging),window.addEventListener("touchmove",this.onDragging),window.addEventListener("mouseup",this.onDragEnd),window.addEventListener("touchend",this.onDragEnd)},onDragging(t){let e=this.list;e[0].value>0&&(e.unshift({id:(new Date).getTime()+parseInt(1e3*Math.random()),value:0,diffPrivate:0,color:this.setLeftColor()}),this.current=1,this.$emit("input",e)),e[e.length-1].diffPrivate<100&&(e.push({id:(new Date).getTime()+parseInt(1e3*Math.random()),value:100-e[e.length-1].diffPrivate,diffPrivate:100,color:this.setRightColor()}),this.$emit("input",e)),"touchmove"===t.type&&(t.clientX=t.touches[0].clientY,t.clientY=t.touches[0].clientY);let r=this.$refs["leslider"].clientWidth,n=Math.round((t.clientX-this.marginLeft)/r*100);this.setPosition(n)},onDragEnd(){window.removeEventListener("mousemove",this.onDragging),window.removeEventListener("touchmove",this.onDragging),window.removeEventListener("mouseup",this.onDragEnd),window.removeEventListener("touchend",this.onDragEnd)},getStopPercentageIndex(t){let{list:e,current:r,stopArr:n}=this,i=r-1;i=i<0?0:e[i].diffPrivate;let o=r+1;if(o=o>=e.length?100:e[o].diffPrivate,t<i||t>o)return null;if(t>=100)return 100;if(t<=0)return 0;let l=n.findIndex(e=>e.left>t);return 0===l?0:(-1===l&&t<100?l=n.length-1:l-=1,n[l].left>i&&n[l].left<o?n[l].left:null)},setPosition(t){if(null===t||isNaN(t))return;if(t<0?t=0:t>100&&(t=100),this.showStops&&(t=this.getStopPercentageIndex(t),null===t))return;let{list:e,current:r}=this,n=e[r+1]?e[r+1].diffPrivate:null,i=e[r-1]?e[r-1].diffPrivate:null;t>=n&&null!==n&&(t=n),t<=i&&null!==i&&(t=i),0===t&&null!==i&&(this.current=0,e.shift()),100===t&&null!==n&&e.pop();let o=this.getValue(t-i);if(e[this.current].value=o,e[this.current].diffPrivate=t,this.current!==this.list.length-1){let r=e[this.current+1];r.value=this.getValue(r.diffPrivate-t)}this.$emit("input",e)},getValue(t){return t<0?t=0:t>100&&(t=100),Math.round(t)},setRightColor(t=this.list){let e=this.colorList;if(1===e.length)return e[0];let r=t.length,n=e.indexOf(t[r-1].color),i=0;return n>=0&&n<e.length-1?i=n+1:n===e.length-1&&(i=0),e[i]},setLeftColor(t=this.list){let e=this.colorList;if(1===e.length)return e[0];let r=e.indexOf(t[0].color),n=0;return 0===r?n=e.length-1:r>0&&r<=e.length-1&&(n=r-1),e[n]}}},u=a;r("370e");function f(t,e,r,n,i,o,l,s){var a,u="function"===typeof t?t.options:t;if(e&&(u.render=e,u.staticRenderFns=r,u._compiled=!0),n&&(u.functional=!0),o&&(u._scopeId="data-v-"+o),l?(a=function(t){t=t||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext,t||"undefined"===typeof __VUE_SSR_CONTEXT__||(t=__VUE_SSR_CONTEXT__),i&&i.call(this,t),t&&t._registeredComponents&&t._registeredComponents.add(l)},u._ssrRegister=a):i&&(a=s?function(){i.call(this,(u.functional?this.parent:this).$root.$options.shadowRoot)}:i),a)if(u.functional){u._injectStyles=a;var f=u.render;u.render=function(t,e){return a.call(e),f(t,e)}}else{var d=u.beforeCreate;u.beforeCreate=d?[].concat(d,a):[a]}return{exports:t,options:u}}var d=f(u,l,s,!1,null,null,null),c=d.exports;c.install=function(t){t.component(c.name,c)};var h=c;e["default"]=h}})}));
//# sourceMappingURL=le-many-slider.umd.min.js.map